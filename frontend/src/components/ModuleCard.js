import React, { useEffect, useState } from "react";
import { Card, Row, Button } from "react-bootstrap";
import { useCartContext } from "../context/cartContext";
function ModuleCard({ module }) {
  const versionList = module.dotnetVersions;
  const [added, setAdded] = useState(false);
  const { cart, addToCart } = useCartContext();

  useEffect(() => {
    const tempItem = cart.find((i) => i.id === module.id);
    if (tempItem) {
      setAdded(true);
    } else {
      setAdded(false);
    }
  }, [added]);
  const buttonAction = () => {
    addToCart(module.id, module);
    setAdded(true);
  };
  return (
    <Card className="my-3 rounded" style={{ width: "35rem", height: "25rem" }}>
      <Card.Header>
        <h3>{module.name}</h3>
      </Card.Header>
      <Card.Body>
        <Row>
          <h5>Description</h5>
        </Row>
        <Row>
          <p>{module.description}</p>
        </Row>
        <Row>
          <h5>Dotnet Versions</h5>
        </Row>
        {versionList.map((version) => (
          <Row>
            <p>{version.name}</p>
          </Row>
        ))}
      </Card.Body>
      <Card.Footer>
        {added ? (
          <Row>
            <h5>ADDED</h5>
          </Row>
        ) : (
          <Button onClick={buttonAction}>Add to Malware</Button>
        )}
      </Card.Footer>
    </Card>
  );
}

export default ModuleCard;
